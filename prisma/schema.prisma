generator client {
provider = "prisma-client-js"
}
datasource db {
provider = "postgresql"
url      = env("DATABASE_URL")
}
model User {
  id              String    @id @default(cuid())
  name            String?
  email           String?   @unique
  image           String?
  coins           Int       @default(100) // Dinheiro do jogo
  gems            Int       @default(0)   // Dinheiro pago
  highScore       Int       @default(0)
  matchesPlayed   Int       @default(0)
  
  // --- NOVOS CAMPOS QUE VOCÃŠ PEDIU ---
  isVip           Boolean   @default(false)
  scoreMultiplier Float     @default(1.0) // Se for 1.1, ganha 10% a mais
  coinMultiplier  Float     @default(1.0) // Se for 2.0, ganha o dobro
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}
model Profile {
id           String   @id @default(cuid())
userId       String   @unique
user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
avatar       String?
coins        Int      @default(0)
gems         Int      @default(0)
xp           Int      @default(0)
level        Int      @default(1)
streak       Int      @default(1)
lastLogin    DateTime @default(now())
referralCode String   @unique
benefits     Json     @default("[]")
}
model StoreItem {
id           String     @id
name         String
priceCents   Int
benefits     Json
active       Boolean    @default(true)
purchases    Purchase[]
}
model Purchase {
id          String    @id @default(cuid())
userId      String
user        User      @relation(fields: [userId], references: [id])
itemId      String
storeItem   StoreItem @relation(fields: [itemId], references: [id])
mpPaymentId String    @unique
status      String
amount      Float
createdAt   DateTime  @default(now())
}
model Referral {
id             String   @id @default(cuid())
referrerId     String
referredUserId String   @unique
createdAt      DateTime @default(now())
}